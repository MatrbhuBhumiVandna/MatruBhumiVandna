                // Add new patriot
                const newPatriot = {
                    name: name,
                    info: info,
                    image: imageUrl
                };
                
                const updatedPatriots = [...patriotsData, newPatriot];
                
                // Save updated patriots
                await fetch('assets/data/patriots.json', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(updatedPatriots)
                });
                
                // Add to the grid
                const patriotItem = document.createElement('div');
                patriotItem.className = 'patriot-item';
                patriotItem.innerHTML = `
                    <div style="position: relative;">
                        <img src="${imageUrl}" alt="${name}" style="width: 100%; height: 150px; object-fit: cover; border-radius: 5px;">
                        <button class="btn btn-secondary remove-patriot" style="position: absolute; top: 5px; right: 5px; padding: 2px 5px; font-size: 12px;">Ã—</button>
                    </div>
                    <h5 style="margin: 5px 0;">${name}</h5>
                    <p style="font-size: 12px; margin: 0;">${info.substring(0, 50)}...</p>
                `;
                document.getElementById('patriots-grid').appendChild(patriotItem);
                
                // Clear form
                document.getElementById('patriot-name').value = '';
                document.getElementById('patriot-info').value = '';
                document.getElementById('patriot-image').value = '';
                
                alert('Patriot added to gallery!');
            } catch (error) {
                alert('Error adding patriot');
                console.error(error);
            }
        });

        // Remove patriot
        document.addEventListener('click', async function(e) {
            if (e.target.classList.contains('remove-patriot')) {
                const patriotItem = e.target.closest('.patriot-item');
                const patriotName = patriotItem.querySelector('h5').textContent;
                
                if (confirm(`Are you sure you want to remove ${patriotName}?`)) {
                    try {
                        // Load current patriots
                        const patriotsData = await fetch('assets/data/patriots.json').then(res => res.json());
                        
                        // Filter out the removed patriot
                        const updatedPatriots = patriotsData.filter(p => p.name !== patriotName);
                        
                        // Save updated patriots
                        await fetch('assets/data/patriots.json', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(updatedPatriots)
                        });
                        
                        // Remove from UI
                        patriotItem.remove();
                        
                        alert(`${patriotName} removed from gallery!`);
                    } catch (error) {
                        alert('Error removing patriot');
                        console.error(error);
                    }
                }
            }
        });

        // Upload media
        document.getElementById('upload-media').addEventListener('click', async function() {
            const fileInput = document.getElementById('media-file');
            const category = document.getElementById('media-category').value;
            const description = document.getElementById('media-description').value;
            
            if (fileInput.files.length === 0) {
                alert('Please select a file to upload');
                return;
            }
            
            if (!category) {
                alert('Please enter a category');
                return;
            }
            
            const statusDiv = document.getElementById('upload-status');
            statusDiv.style.display = 'block';
            statusDiv.innerHTML = '<p>Uploading file... Please wait.</p>';
            
            try {
                // In a real app, you would upload the file to a server here
                // For this example, we'll just simulate the upload
                
                setTimeout(() => {
                    statusDiv.innerHTML = `
                        <p style="color: var(--primary-color);">File uploaded successfully!</p>
                        <p><strong>File:</strong> ${fileInput.files[0].name}</p>
                        <p><strong>Type:</strong> ${document.getElementById('media-type').value}</p>
                        <p><strong>Category:</strong> ${category}</p>
                        <p><strong>Description:</strong> ${description || 'None'}</p>
                    `;
                    
                    // Clear form
                    fileInput.value = '';
                    document.getElementById('media-category').value = '';
                    document.getElementById('media-description').value = '';
                }, 1500);
            } catch (error) {
                statusDiv.innerHTML = `<p style="color: var(--primary-color);">Error uploading file: ${error.message}</p>`;
            }
        });
    </script>
</body>
</html>
